<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spreadsheet Form</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- <style>
        .table-container {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .table th, .table td {
            vertical-align: middle;
            text-align: center;
        }
        .table th {
            background-color: #166cc1;
            color: #fff;
        }
    </style> -->
</head>

<body>  


    
    <div class="container mt-5">
            <h1 class="display-4 text-center mb-4">Schedule Automation</h1>
            <!-- Your other content goes here -->
    </div>

    <div class="container mt-5">
        <div class="vessel-list">
            <h2 class="mb-4">Available Vessels</h2>
            <ul id="vesselList" class="list-group">
                <li class="vessel-item list-group-item">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value='HR SAHARE "MSAH"'> HR SAHARE "MSAH"
                    </label>
                </li>
                <li class="vessel-item list-group-item">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value='HR HERA  "MHRA"'> HR HERA "MHRA"
                    </label>
                </li>
                <li class="vessel-item list-group-item">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value='HR SARERA "MSAR"'> HR SARERA "MSAR"
                    </label>
                </li>
                <li class="vessel-item list-group-item">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value='HR FARHA "MHRF"'> HR FARHA "MHRF"
                    </label>
                </li>
                <li class="vessel-item list-group-item">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value='HR AARAI "MRAI"'> HR AARAI "MRAI"
                    </label>
                </li>
                <li class="vessel-item list-group-item">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value='HR BALU "MBLU"'> HR BALU "MBLU"
                    </label>
                </li>
                <!-- Add more vessels as needed -->
            </ul>
        </div>

        <div class="text-center mt-4">
            <form id="vesselForm" method="POST" action="{% url 'cce_table' %}">
                {% csrf_token %}
                <input type="hidden" name="vessel_names" id="vesselNamesInput">
                <button type="submit" class="btn btn-primary" onclick="collectSelectedVessels(event)">Generate</button>
            </form>
        </div>
    </div>
        

    <div class="container mt-5">
        <div class="table-container">
            <h1 class="mb-4 text-center">CCE Table</h1>
            <table class="table table-striped table-bordered table-hover">
                <thead class="thead-dark">
                    <tr>
                        {% if samples %}
                            {% for key in samples.0.keys %}
                                <th>{{ key }}</th>
                            {% endfor %}
                        {% endif %}
                    </tr>
                </thead>
                <tbody id="tableBody">
                    {% for sample in samples %}
                        <tr>
                            {% for value in sample.values %}
                                <td>{{ value }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
      
        
        // const vesselNames = [];

        // function addVessel() {
        //     const vesselInput = document.getElementById('vesselInput');
        //     const vesselName = vesselInput.value.trim();
        //     if (vesselName) {
        //         vesselNames.push(vesselName);
        //         updateVesselList();
        //         vesselInput.value = '';
        //     }
        // }

        // function removeVessel(index) {
        //     vesselNames.splice(index, 1);
        //     updateVesselList();
        // }

        // // Function to populate the table
        // function updateVesselList() {
        //     const vesselList = document.getElementById('vesselList');
        //     vesselList.innerHTML = '';
        //     vesselNames.forEach((name, index) => {
        //         const listItem = document.createElement('li');
        //         listItem.className = 'vessel-item';
        //         listItem.innerHTML = `
        //             <span>${name}</span>
        //             <button type="button" onclick="removeVessel(${index})">Remove</button>
        //         `;
        //         vesselList.appendChild(listItem);
        //     });
        //     document.getElementById('vesselNamesInput').value = JSON.stringify(vesselNames);
        // }

        // Populate table with data source
        
        function collectSelectedVessels() {
        const vesselNames = [];
        const checkboxes = document.querySelectorAll('#vesselList input[type="checkbox"]:checked');
        checkboxes.forEach(checkbox => {
            vesselNames.push(checkbox.value);
        });
        document.getElementById('vesselNamesInput').value = JSON.stringify(vesselNames);
    }

    // function collectSelectedVessels(event) {
    //         event.preventDefault(); // Prevent the form from submitting the traditional way

    //         const vesselNames = [];
    //         const checkboxes = document.querySelectorAll('#vesselList input[type="checkbox"]:checked');
    //         checkboxes.forEach(checkbox => {
    //             vesselNames.push(checkbox.value);
    //         });
    //         document.getElementById('vesselNamesInput').value = JSON.stringify(vesselNames);

    //         // Submit the form using AJAX
    //         $.ajax({
    //             type: 'POST',
    //             url: $('#vesselForm').attr('action'),
    //             data: $('#vesselForm').serialize(),
    //             success: function(response) {
    //                 // Update the table body with the new data
    //                 $('#tableBody').html(response.table_rows_html);
    //             },
    //             error: function(error) {
    //                 console.error('Error:', error);
    //             }
    //         });
    //     }
    
    // function populateTable(data) {        
        
    //         const tableBody = document.querySelector('#spreadsheet tbody');
    //         tableBody.innerHTML = '';
        
    //         data.forEach(rowData => {
    //             const row = document.createElement('tr');
    //             row.innerHTML = `
    //                 <td>${rowData.name}</td>
    //                 <td>${rowData.age}</td>
    //                 <td>${rowData.salary}</td>
    //             `;
    //             tableBody.appendChild(row);
    //         });
    //     }


    //     populateTable(dataSource);
    </script>
</body>
</html>